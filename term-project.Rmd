---
title: "Going Long on Temperature"
author: "Simon Crase"
date: "27 October 2016"
output: pdf_document
---
```{r,echo=FALSE,warning=FALSE,message=FALSE}
library(knitr)
source('timeseries.R')
# Set n.records to -1 to process the entire dataset, 0r 10000 for testing
n.records=1000
# Number of stations
n.stations=25
```

# Introduction

##Idea

My project started with the idea of presenting temperatues from randomly selected station. I downloaded the list of station names from the [Time Series Browser](http://climatemodels.uchicago.edu/timeseries/), and wrote a short Python script to select station names at random. I then manually selected stations, see link [here](http://climatemodels.uchicago.edu/timeseries/#DpPwBjiUcCsBdlJzLhDaoQtEqDsJqMgRz).
```{r fig.width=5, fig.height=5,echo=FALSE,fig.align='left'}
library(grid)
img <- readPNG("TimeSeriesBrowser.png")
 grid.raster(img)
```


##References
Code is stored in [my Github repository - user name 'weka11'](https://github.com/weka511/global)

# Methodology

* Select stations at random

# Results

```{r,echo=FALSE}
station.index<-read.index()
temperature.readings<-read.temperatures(n=n.records)
ids<-get.random.stations.with.data(n.stations,station.index,temperature.readings)
rownames(station.index)<-station.index$ID
ss<-subset(station.index[ids,],TRUE,c('ID','NAME','LATITUDE','LONGITUDE'))
kable(ss,row.names=FALSE)
for (id in ids){
  dd<-get.data.for.station(id,temperature.readings)
  dd<-attach.average.temperature(dd)
  name<-station.index[station.index$ID==id,5]
  x<-dd$YEAR
  y<-dd$MEAN
  plot(x=x,y=y,main=paste(id,name,sep=': '),xlab = "Year", ylab="Average T")
  abline(lm(y~x), col="red")
}
```
